<!DOCTYPE html>
<html lang="id">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  if (location.hostname === "annoev.web.id") {
    var s = document.createElement("script");
    s.src = "https://cloud.umami.is/script.js";
    s.defer = true;
    s.setAttribute("data-website-id", "5402b7b9-f7af-4640-bbf1-a98a0887e282");
    document.head.appendChild(s);
  }
</script>
<title>aNNo Ecovera</title>
<style>
:root{
  --mint:#b9f3e4;
  --sky:#c8e7ff;
  --lemon:#fff7a5;
  --accent:#8bd3ff;
  --text-dark:#222;
  --bg:#eef3f8;
  --card:rgba(255,255,255,0.8);
  --brand-eco:#4ecdc4;
}
html, body {
  overflow-x: hidden;
  width: 100%;
}
*{box-sizing:border-box;}
html,body{margin:0;padding:0;font-family:'Montserrat',sans-serif;background:var(--bg);color:var(--text-dark);scroll-behavior:smooth;}
a{text-decoration:none;color:inherit;}

/* NAVBAR */
nav{position:fixed;top:14px;left:50%;transform:translateX(-50%);width:92%;max-width:1100px;display:flex;justify-content:space-between;align-items:center;padding:.45rem .9rem;background:rgba(255, 255, 255, 0.85);border-radius:16px;box-shadow:0 4px 16px rgba(0,0,0,.06);z-index:1000;}
.nav-left h1{margin:0;font-size:1.05rem;font-weight:800;}
.brand-outline{color: var(--brand-eco); font-weight:800;text-shadow:-1px 0 0 #fff,1px 0 0 #fff,0 -1px 0 #fff,0 1px 0 #fff; letter-spacing:0.8px;}

/* HAMBURGER */
.hamburger{width:34px;height:26px;padding:4px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;position:relative;}
.hamburger span{height:3px;background:#222;border-radius:4px;transition:.3s;}
.hamburger.active span{opacity:0;}
.hamburger-close{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:1.4rem;font-weight:800;opacity:0;pointer-events:none;transition:.2s;}
.hamburger.active .hamburger-close{opacity:1;}

/* MENU */
.nav-menu{position:fixed;top:20px;right:-320px;width:300px;background:white;padding:20px;border-radius:14px;box-shadow:-6px 8px 28px rgba(0,0,0,.15);transition:.3s;z-index:1200;}
.nav-menu.open{right:20px;}
.nav-menu a{display:block;padding:10px 6px;font-weight:700;}
.menu-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-weight:800;}
.menu-close{font-size:1.6rem;cursor:pointer;line-height:1;}

/* OVERLAY */
.overlay{position:fixed;inset:0;opacity:0; background:rgba(0,0,0,.25);pointer-events:none;transition:.3s;z-index:1100;}
.overlay.show{opacity:1;pointer-events:auto;}

/* HERO */
.hero{background:linear-gradient(135deg,var(--mint),var(--sky));padding:3.5rem 1rem 1.6rem;text-align:center;}
.hero-logo{max-width:150px;margin:1.2rem 0 .6rem;cursor:pointer;}
.hero h2{margin:0 0 .2rem;font-size:1.9rem;font-weight:700;}
.typing-container{font-size:2.2rem;font-weight:800;line-height:1.1;color:var(--brand-eco);transform:translateX(12px);text-shadow:-1px 0 0 #fff,1px 0 0 #fff,0 -1px 0 #fff,0 1px 0 #fff;}
.hero-desc{font-family:'Montserrat',sans-serif;font-size:1.05rem;font-weight:500;line-height:1.6;color:black;max-width:720px;margin-inline:auto;padding-top:22px;}

/* ================= MARQUEE FIXED SMALL ================= */
.marquee {
  background: var(--lemon);
  height: 26px; /* tinggi bar tetap */
  overflow: hidden;
  display: flex;
  align-items: center;
  border-top: 2px solid black;
  border-bottom: 2px solid black;
  position: relative;
}

.marquee-track {
  display: flex;
  width: max-content;
  animation: marqueeScroll 10s linear infinite;
  transform: translateX(0); /* pastikan default */
}

.marquee-text {
  font-weight: 500 !important; /* pastikan kepake */
  font-size: 20px !important;   /* pasti kecil, konsisten */
  line-height: 1 !important;    /* hindari teks ‚Äúmembesar‚Äù karena line-height */
  color: #fff;
  margin-right: 15px;
  white-space: nowrap;
  letter-spacing: 1px;
  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

/* Animasi marquee tetap */
@keyframes marqueeScroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}
/* PRODUCT */
.img-preview-overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 3000;
}
.img-preview-overlay img{
  max-width: 90vw;
  max-height: 90vh;
  border-radius: 12px;
}
.product-price {
  background-color: #ef6b6b;
  border-radius: 10px;
  text-align: center;
  font-size: 1.3rem;
  color: white;
  border-top: 2px solid black;
  border-bottom: 2px solid black;
  text-shadow:
    -0.5px 0 0 #000,
     0.5px 0 0 #000,
     0 -0.5px 0 #000,
     0  0.5px 0 #000;
}
.product-section{padding-top:1.2rem;background:linear-gradient(to bottom,rgba(255,255,255,0.6),var(--bg));}
.product-main,.product{display:flex;gap:1rem;border-radius:14px;transition: transform .2s ease, box-shadow .2s ease;}
.product-main{padding:1rem;background:var(--card);box-shadow:0 4px 12px rgba(0,0,0,.08);position:relative;}
.product-main:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,.12);}
.product-main img,.product img{width:150px;height:150px;border-radius:12px;cursor:pointer;object-fit:cover;}
.badge{position:absolute;top:8px;left:8px;background:#ef6b6b;color:white;font-size:0.7rem;font-weight:700;padding:4px 6px;border-radius:6px; white-space: nowrap; text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;}
.product-actions{display:flex;flex-direction:column;gap:8px;margin-top:10px;}
.action-row{display:flex;gap:8px;}
.btn-action {
  flex:1;
  background: linear-gradient(to right, rgba(78,205,196,0.85), rgba(0,0,0,0.45));
  color:white;
  border: 1px solid var(--lemon);
  padding:8px 12px;
  font-size:0.95rem;
  border-radius:12px;
  font-weight:600;
  text-align:center;
  cursor:pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s ease, border-color 0.2s ease;
  position:relative;
  overflow:hidden;
  letter-spacing:1.2px;
  box-shadow:0 2px 6px rgba(0,0,0,0.25);
  backdrop-filter: blur(4px);
}
.btn-action:hover {
  transform: translateY(-3px);
  box-shadow:0 6px 12px rgba(0,0,0,0.3);
  background: linear-gradient(to right, rgba(78,205,196,0.95), rgba(0,0,0,0.55));
  border-color: var(--lemon);
}
.btn-komposisi {
  all: unset;                 /* üî• RESET SEMUA DEFAULT BUTTON */
  box-sizing: border-box;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  flex: 1;
  height: 40px;               /* ‚¨ÖÔ∏è kunci konsistensi */
  padding: 0 12px;

  background: linear-gradient(
    to right,
    rgba(78,205,196,0.7),
    rgba(0,0,0,0.45)
  );

  color: white;
  border: 1px solid var(--lemon);
  border-radius: 12px;

  font-family: 'Montserrat', sans-serif;
  font-weight: 800;
  font-size: 0.95rem;
  letter-spacing: 1.2px;
  line-height: 1;

  text-align: center;
  cursor: pointer;

  box-shadow: 0 2px 4px rgba(0,0,0,0.18);
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s ease;
}
.btn-komposisi:hover {
  transform: translateY(-2px);
  box-shadow:0 5px 10px rgba(0,0,0,0.22);
  background: linear-gradient(to right, rgba(78,205,196,0.85), rgba(0,0,0,0.55));
  border-color: var(--lemon);
}
.other-products .btn-action,
.other-products .btn-komposisi {
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
}
.composition-card {
  position: fixed;
  display: none;
  width: 260px;
  background: rgba(255, 255, 255, 0.65);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.45);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.18);
  padding: 16px;
  z-index: 9999;
  opacity: 0;
  transition: opacity 0.25s ease, transform 0.25s ease;
  transform: translateX(-50%) translateY(6px);
}
.composition-card.show {
  display: block;
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}
.composition-card h4 {
  margin: 0 0 8px;
  font-size: 0.95rem;
  font-weight: 800;
  color: black;
}
.composition-card p {
  margin: 0;
  font-size: 0.85rem;
  line-height: 1.5;
  color: #222;
  white-space: pre-line;
}
@supports not ((backdrop-filter: blur(6px)) or (-webkit-backdrop-filter: blur(6px))) {
  .composition-card {
    background: rgba(255, 255, 255, 0.9);
  }
}
.other-products p {
  font-size: 22px !important;
  color: #2ECC71;
  text-shadow:
    -0.3px 0 0 #000,
     0.3px 0 0 #000,
     0 -0.3px 0 #000,
     0  0.3px 0 #000;
}
.other-products h4[data-product="Dabu"],
.other-products h4[data-product="Focca"],
.other-products h4[data-product="Rareco"]{
  color:Black;
  text-transform: uppercase;
}
.other-products h4[data-product="centella"]{
  color:var(--brand-eco);
  text-shadow: -1px 0 #fff, 1px 0 #fff;
}
.other-products-container{background:linear-gradient(135deg,var(--sky),var(--mint));padding:2rem 1rem;margin-top:2rem;}
.section-title{text-align:center;font-weight:900;margin-bottom:1rem; font-size:5.5vw;}
.other-products{display:flex;flex-direction:column;gap:1rem;}
.product{background:white;padding:.8rem;box-shadow:0 4px 12px rgba(0,0,0,.08);}
.product:hover{transform:translateY(-1.5px);box-shadow:0 8px 20px rgba(0,0,0,.12);}
.zone{background:rgba(0, 0, 0, 0.45); font-family:Montserrat;color:var(--mint);padding:.25rem .6rem;border-radius:10px;font-size:.89rem;font-weight:800;letter-spacing:0.5px;text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;}
.info-cards {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: 2rem;
}
.info-card {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(6px);
  padding: 16px;
  border-radius: 14px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.info-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.15);
}
.info-card h4 {
  margin: 0 0 8px;
  font-size: 1rem;
  font-weight: 800;
  color: black;
}
.info-card p {
  font-family: Montserrat;
  margin: 0 0 10px;
  font-size: 0.95rem;
  line-height: 1.5;
  color: #333;
}
footer{text-align:center;padding:1rem;background:white;font-weight:700;}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);justify-content:center;align-items:center;z-index:4000;}
.modal img{max-width:90%;border-radius:10px;}
.close-modal{position:absolute;top:20px;right:30px;font-size:2rem;color:white;cursor:pointer;}
#waFloat{position:fixed;right:20px;bottom:20px;width:64px;height:64px;border-radius:50%;background:#25D366;color:white;display:flex;align-items:center;justify-content:center;font-size:22px;z-index:2000;border:none;cursor:pointer;}
.blink {animation: blink 1s steps(1) infinite;}
@keyframes blink {50% { opacity: 0; }}

/* =====================================
   FONT HIERARCHY OVERRIDE (SAFE MODE)
===================================== */
body{
  font-family:'Inter',sans-serif;
  font-weight:500;
  letter-spacing:.15px;
}
h1,h2,h3,h4,h5,h6,
.nav-left h1,
.section-title,
.brand-outline,
.menu-header,
.zone,
.badge{
  font-family:'Montserrat',sans-serif;
  font-weight:900;
  letter-spacing:.8px;
}
.hero h2,
.typing-container,
.marquee-text{
  font-family:'Montserrat',sans-serif;
  font-weight:900;
}
nav,
.nav-menu a,
.menu-header{
  font-family:'Montserrat',sans-serif;
  font-weight:800;
  letter-spacing:.9px;
}
.btn-action,
.btn-komposisi,
.hero-desc,
.info-card p,
.product p,
.composition-card p,
footer{
  font-family:'Inter',sans-serif;
  font-weight:500;
  letter-spacing:.3px;
}
#waFloat{
  font-family:'Montserrat',sans-serif;
  font-weight:800;
  letter-spacing:1.3px;
  background: linear-gradient(
  to right,
  rgba(78,205,196,0.85),
  rgba(0,0,0,0.45)
);
border: 1px solid var(--lemon);
}
/* ================= SUPER MARKETING FAQ FLOAT ================= */

#faqFloat{
  position:fixed;
  right:-100px;                 /* awal disembunyiin */
  bottom:100px;
  width:64px;
  height:64px;
  border-radius:50%;
  color:white;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  z-index:2100;
  border:1px solid var(--lemon);
  cursor:pointer;

  font-family:'Montserrat',sans-serif;
  font-weight:800;

  background: linear-gradient(
    to right,
    rgba(78,205,196,0.95),
    rgba(0,0,0,0.55)
  );

  box-shadow:0 0 0 rgba(78,205,196,0.7);
  opacity:0;
  transition: right 0.6s cubic-bezier(.22,.61,.36,1), opacity 0.6s ease;
}

/* STATE MUNCUL */
#faqFloat.show{
  right:20px;
  opacity:1;
  animation: faqPulse 2.5s infinite;
}

/* üî• PULSE GLOW */
@keyframes faqPulse {
  0% { box-shadow: 0 0 0 0 rgba(78,205,196,0.6); }
  70% { box-shadow: 0 0 0 18px rgba(78,205,196,0); }
  100% { box-shadow: 0 0 0 0 rgba(78,205,196,0); }
}

/* üîî GETAR HALUS */
@keyframes faqShake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-2px); }
  40% { transform: translateX(2px); }
  60% { transform: translateX(-2px); }
  80% { transform: translateX(2px); }
  100% { transform: translateX(0); }
}

#faqFloat.shake{
  animation: faqShake 0.4s;
}

/* BADGE FAQ */
.faq-badge{
  position:absolute;
  top:-6px;
  right:-6px;
  background:#ef6b6b;
  color:white;
  font-size:0.65rem;
  font-weight:800;
  padding:4px 6px;
  border-radius:10px;
  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
  box-shadow:0 2px 6px rgba(0,0,0,0.3);
}

/* TOOLTIP */
.faq-tooltip{
  position:absolute;
  right:80px;
  background:black;
  color:white;
  font-size:0.8rem;
  padding:6px 10px;
  border-radius:8px;
  opacity:0;
  pointer-events:none;
  transform: translateX(10px);
  transition: all 0.3s ease;
  white-space: nowrap;
}

#faqFloat:hover .faq-tooltip{
  opacity:1;
  transform: translateX(0);
}

/* HOVER EFFECT */
#faqFloat:hover{
  transform: translateY(-6px) scale(1.08);
  background: linear-gradient(
    to right,
    rgba(78,205,196,1),
    rgba(0,0,0,0.65)
  );
  box-shadow: 0 14px 32px rgba(0,0,0,0.4);
  animation:none;
}
#waFloat:hover {
  transform: translateY(-4px);
  background: linear-gradient(
    to right,
    rgba(78,205,196,0.95),
    rgba(0,0,0,0.55)
  );
  box-shadow: 0 12px 28px rgba(0,0,0,0.35);
}
/* TRUST POPUP OVERLAY */
.trust-popup {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.35);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease, transform 0.3s ease;
  transform: translateY(20px);
  z-index: 5000;
}
.trust-popup.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
.trust-card {
  width: 90%;
  max-width: 380px;
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(6px);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  box-shadow: 0 12px 30px rgba(0,0,0,0.25);
  position: relative;
}

/* ==========================
   FONT FIX DEPLOY CONSISTENCY
   ========================== */
html { font-size:16px; }
body, h1, h2, h3, h4, h5, h6, p, a, span, button {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}
.hero h2, .typing-container, .marquee-text { font-size: clamp(2rem,2.2vw,2.2rem); line-height:1.1; }
.section-title { font-size: clamp(1.8rem,5vw,2.2rem); }
.hero-desc, .info-card p, .product p, .composition-card p, footer { font-size:1rem; line-height:1.6; }
@font-face { font-family:'Montserrat'; font-display:swap; }
@font-face { font-family:'Inter'; font-display:swap; }
</style>
</head>
<body>

<nav>
  <div class="nav-left"><h1>aNNo <span class="brand-outline">ecovera</span></h1></div>
  <div class="hamburger" id="hamburger"><span></span><span></span><span></span><span class="hamburger-close">&times;</span></div>
</nav>

<div class="overlay" id="overlay"></div>
<div class="nav-menu" id="navMenu">
  <div class="menu-header"><span>MENU</span><span class="menu-close" id="menuClose">&times;</span></div>
  <a href="#home">Home</a>
  <a href="faq.html" class="menu-link">FAQ Produk</a>
<a href="#produksiCard" class="menu-link">Produksi</a>
  <a href="testimoni.html">Testimoni</a>
</div>

<section class="hero" id="home">
<img src="y.jpg" class="hero-logo" id="heroPreview" loading="eager">
  <h2>WELCOME to</h2>
  <div class="typing-container"><span id="typed"></span><span class="blink">_</span></div>
  <div class="hero-desc">
    Dari munculnya kesadaran betapa bermanfaatnya bahan alami. Inilah tempat ekosistem mandiri yang menyediakan berbagai produk berbahan alami. Karena yang alami, selalu membuat tenang di hati.  
    <span class="outline-white"> KEEP ENJOY AND HAPPY:).</span>
  </div>
</section>

<div class="marquee">
  <div class="marquee-track">
    <span class="marquee-text">√ó PRODUK UNGGULAN √ó</span>
    <span class="marquee-text">√ó PRODUK UNGGULAN √ó</span>
    <span class="marquee-text">√ó PRODUK UNGGULAN √ó</span>
    <span class="marquee-text">√ó PRODUK UNGGULAN √ó</span>
  </div>
</div>

<section class="product-section" id="produk">
<div id="produk-utama-wrapper"></div>

  <div class="other-products-container">
    <div class="section-title">PRODUK LAIN</div>
    <div class="other-products" id="produk-list-wrapper">
    </div>
  <div class="info-cards">
  <!-- CARD 1: Tentang Brand -->
  <div class="info-card" id="aboutCard">
    <h4>Tentang aNNo Ecovera</h4>
    <p>
      aNNo Ecovera adalah ekosistem produk alami yang fokus pada gaya hidup sehat dengan sentuhan modern. 
      Kami berkomitmen menghadirkan produk yang alami, aman, dan membuat hidup lebih tenang.
    </p>
  </div>

  <!-- CARD 2: Tentang Produksi -->
  <div class="info-card" id="produksiCard">
    <h4>Produksi</h4>
    <p>
      Semua produk kami dibuat dengan standar higienis dan bahan alami pilihan. 
      Kami mengutamakan kualitas dan ramah lingkungan.
    </p>
    <a href="https://web-lain-anda.com" target="_blank" class="btn-action">Lebih Lanjut</a>
  </div>
</div></div>
</section>

<footer>CALL US : <i class="fab fa-whatsapp"></i> 083846313448</footer>

<div class="composition-card" id="compositionCard">
  <button id="compositionClose" style="position:absolute;top:6px;right:8px;font-size:1.2rem;background:none;border:none;cursor:pointer;">&times;</button>
  <h4 id="compositionTitle"></h4>
  <p id="compositionText"></p>
</div>

<div class="modal" id="imageModal"><span class="close-modal" id="closeModal">&times;</span><img id="modalImg" src=""></div>

<div class="img-preview-overlay" id="imgPreview"><img src="" alt="Preview"></div>
<a id="faqFloat" href="faq.html">
  <i class="fas fa-circle-question"></i>
  <span class="faq-badge">FAQ</span>
  <span class="faq-tooltip">Butuh bantuan?</span>
</a>
<a id="waFloat" 
   href="https://wa.me/6283846313448?text=Halo%20aNNo%20Ecovera,%20saya%20tertarik%20dengan%20produk%20Anda" 
   target="_blank">
  <i class="fab fa-whatsapp"></i>
</a> 
<!-- POPUP TRUST -->
<div class="trust-popup" id="trustPopup">
  <div class="trust-card">
    <h3>Tentang bahan yang kami gunakan</h3>
    <p>
      Centella Asiatica yang kami gunakan berasal dari kebun kami sendiri,
      dipadukan dengan hasil panen petani lokal terpercaya.
      Alami, terjaga, dan kami kenal asalnya.
    </p>
    <button id="trustAccept" class="btn-action">Lanjutkan</button>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const popup = document.getElementById('trustPopup');
  const btn = document.getElementById('trustAccept');

  // Set awal state untuk animasi
  popup.style.opacity = 0;
  popup.style.transform = 'translateY(20px)';
  popup.style.transition = 'opacity 0.3s ease, transform 0.3s ease';

  // Tampilkan popup sekali per session
  if (!sessionStorage.getItem('trustShown')) {
    setTimeout(() => {
      popup.classList.add('show');
      popup.style.opacity = 1;
      popup.style.transform = 'translateY(0)';
    }, 1000); // delay 1 detik
    sessionStorage.setItem('trustShown', 'yes');
  }

  // Tombol Lanjutkan -> animasi fade out
  btn.onclick = () => {
    popup.style.opacity = 0;
    popup.style.transform = 'translateY(20px)';
    setTimeout(() => popup.classList.remove('show'), 300); // hapus class setelah animasi selesai
  };
});



/* ================= NAV MENU ================= */
const hamburger = document.getElementById('hamburger');
const navMenu = document.getElementById('navMenu');
const overlay = document.getElementById('overlay');
const menuClose = document.getElementById('menuClose');

hamburger.onclick = () => {
  navMenu.classList.add('open');
  overlay.classList.add('show');
  hamburger.classList.add('active');
};

const closeMenu = () => {
  navMenu.classList.remove('open');
  overlay.classList.remove('show');
  hamburger.classList.remove('active');
};
menuClose.onclick = closeMenu;
overlay.onclick = closeMenu;
document.querySelectorAll('#navMenu a').forEach(link => link.addEventListener('click', closeMenu));

/* ================= HERO TYPING LOOP ================= */
const typingTexts = ["Wellness Vibe", "Nature Flow", "with", "aNNo ecovera :)"];
const typed = document.getElementById("typed");
let textIndex = 0, charIndex = 0, isDeleting = false;

function typeLoop(){
  const currentText = typingTexts[textIndex];
  typed.textContent = currentText.substring(0, charIndex + (isDeleting ? -1 : 1));
  charIndex += isDeleting ? -1 : 1;

  if(!isDeleting && charIndex === currentText.length){
    setTimeout(() => isDeleting = true, textIndex === typingTexts.length - 1 ? 3000 : 1200);
  } else if(isDeleting && charIndex === 0){
    isDeleting = false;
    textIndex = (textIndex + 1) % typingTexts.length;
  }
  setTimeout(typeLoop, isDeleting ? 60 : 100);
}
typeLoop();

/* ================= IMAGE MODALS ================= */
const modal = document.getElementById('imageModal');
const modalImg = document.getElementById('modalImg');
const imgPreview = document.getElementById('imgPreview');
const previewImg = imgPreview.querySelector('img');

document.getElementById('heroPreview').onclick = () => {
  modal.style.display = 'flex';
  modalImg.src = heroPreview.src;
};
document.getElementById('closeModal').onclick = () => modal.style.display = 'none';
window.onclick = (e) => { if(e.target === modal) modal.style.display = 'none'; };

document.querySelectorAll('.product-img').forEach(img => {
  img.onclick = () => {
    imgPreview.style.display = 'flex';
    previewImg.src = img.src;
  };
});
imgPreview.onclick = () => imgPreview.style.display = 'none';

/* ================= COMPOSITION CARD LOGIC ================= */
const compCard = document.getElementById('compositionCard');
const compTitle = document.getElementById('compositionTitle');
const compText = document.getElementById('compositionText');
const compClose = document.getElementById('compositionClose');

function hideCompCard() {
  compCard.style.opacity = '0';
  setTimeout(() => {
    compCard.style.display = 'none';
    compCard.classList.remove('show');
  }, 300);
}

function showCompCard(btn) {
  compTitle.textContent = btn.dataset.title;
  compText.textContent = btn.dataset.text;

  compCard.style.display = 'block';
  compCard.classList.add('show');
  compCard.style.opacity = '0';

  requestAnimationFrame(() => {
    const rect = btn.getBoundingClientRect();

    let top = rect.top - compCard.offsetHeight - 10;
    if (top < 10) top = rect.bottom + 10;

    compCard.style.top = top + 'px';
    compCard.style.left = rect.left + rect.width / 2 + 'px';

    // üî• INI KUNCI UTAMANYA

    compCard.style.opacity = '1';
  });
}
compClose.addEventListener('click', hideCompCard);

document.querySelector('.product-section').addEventListener('click', (e) => {
  const btn = e.target.closest('.btn-komposisi');
  if (!btn) return;
  if (compCard.classList.contains('show') && compTitle.textContent === btn.dataset.title) {
    hideCompCard();
    return;
  }
  showCompCard(btn);
});

document.addEventListener('click', (e) => {
  if (!e.target.closest('.btn-komposisi') && !e.target.closest('#compositionCard')) hideCompCard();
});
compCard.addEventListener('click', e => e.stopPropagation());

/* ================= FETCH DATA DARI JSON ================= */
async function loadProducts() {
  try {
    const response = await fetch('produk.json');
    const products = await response.json();
    
    const utamaWrapper = document.getElementById('produk-utama-wrapper');
    const listWrapper = document.getElementById('produk-list-wrapper');

    products.forEach(p => {
      if (p.isMain) {
        // Template untuk Produk Utama (Centella)
        utamaWrapper.innerHTML = `
  <div class="product-main">
    <div class="product-media">
      <div class="product-img-wrapper">
        <img src="${p.gambar}" class="product-img" alt="${p.nama}">
        <div class="badge">${p.badge}</div>
      </div>

      <!-- HARGA DI BAWAH FOTO -->
      <div class="product-price">
        Rp ${p.harga.toLocaleString('id-ID')}
      </div>
    </div>

    <div>
            <div>
              <h3>${p.nama}</h3>
              <p>Kenapa harus Centella Asiatica?</p>
              <div class="product-actions">
                <div class="action-row">
                  <a href="${p.linkWA}" target="_blank" class="btn-action">Beli</a>
                  <button class="btn-action btn-komposisi" data-title="Komposisi masker" data-text="${p.komposisi}">Komposisi</button>
                </div>
                <a href="${p.linkAbout}" class="btn-action full">About Centella</a>
              </div>
            </div>
          </div>
        `;
      } else {
        // Template untuk Produk Lainnya
        listWrapper.innerHTML += `
          <div class="product">
            <img src="${p.gambar}" class="product-img" alt="${p.nama}">
            <div style="flex:1">
              <span class="zone">${p.zona}</span>
        <h4 data-product="${p.productKey}">${p.nama}</h4>
              <p>${p.harga}</p>
              <div class="product-actions">
                <div class="action-row">
                  <a href="${p.linkWA}" target="_blank" class="btn-action">Beli</a>
                  <button class="btn-action btn-komposisi" data-title="Komposisi ${p.productKey}" data-text="${p.komposisi}">Komposisi</button>
                </div>
              </div>
            </div>
          </div>
        `;
      }
    });

    // Jalankan ulang event listener untuk gambar setelah produk muncul
    reinitImagePreview();

  } catch (error) {
    console.error("Gagal memuat produk:", error);
  }
}

// Fungsi tambahan agar klik gambar tetap jalan setelah render JSON
function reinitImagePreview() {
  document.querySelectorAll('.product-img').forEach(img => {
    img.onclick = () => {
      const imgPreview = document.getElementById('imgPreview');
      const previewImg = imgPreview.querySelector('img');
      imgPreview.style.display = 'flex';
      previewImg.src = img.src;
    };
  });
}

// Panggil fungsi saat halaman siap
window.addEventListener('DOMContentLoaded', loadProducts);
window.addEventListener('load', () => {
  const hash = window.location.hash; // ambil misal #aboutCard atau #produksiCard
  if(hash) {
    const el = document.querySelector(hash);
    if(el) el.scrollIntoView({behavior: 'smooth'});
  }
});
/* ================= SUPER MARKETING FAQ FLOAT LOGIC ================= */

const faqFloat = document.getElementById('faqFloat');
let faqShown = false;
let tooltipShown = false;

// MUNCUL SETELAH SCROLL 20%
window.addEventListener('scroll', () => {
  const scrollPercent = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 200;

  if (scrollPercent > 20 && !faqShown) {
    faqFloat.classList.add('show');
    faqShown = true;

    // AUTO TOOLTIP MUNCUL 1X
    setTimeout(() => {
      const tooltip = faqFloat.querySelector('.faq-tooltip');
      if (!tooltipShown) {
        tooltip.style.opacity = 1;
        tooltip.style.transform = 'translateX(0)';
        tooltipShown = true;

        // hilang setelah 3 detik
        setTimeout(() => {
          tooltip.style.opacity = 0;
          tooltip.style.transform = 'translateX(10px)';
        }, 3000);
      }
    }, 1200);
  }
});

// üîî GETAR HALUS TIAP 8 DETIK (SELAMA MASIH KELIHATAN)
setInterval(() => {
  if (faqFloat.classList.contains('show')) {
    faqFloat.classList.add('shake');
    setTimeout(() => faqFloat.classList.remove('shake'), 400);
  }
}, 8000);
/* ========== AUTO LAZY LOADING UNTUK SEMUA GAMBAR ========== */

function applyLazyLoading() {
  document.querySelectorAll("img").forEach(img => {
    // Jangan timpa kalau sudah ada
    if (!img.hasAttribute("loading")) {
      img.setAttribute("loading", "lazy");
    }
  });
}

/* Jalankan saat halaman pertama kali siap */
document.addEventListener("DOMContentLoaded", applyLazyLoading);

/* Jalankan lagi setelah produk JSON selesai dimuat */
const originalLoadProducts = loadProducts;
window.loadProducts = async function() {
  await originalLoadProducts();
  applyLazyLoading(); // üî• KUNCI: biar gambar dari JSON juga kena lazy
};
</script>
</body>
</html>
